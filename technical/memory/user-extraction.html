<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/muxi/assets/css/just-the-docs-default.css"> <link rel="stylesheet" href="/muxi/assets/css/just-the-docs-head-nav.css" id="jtd-head-nav-stylesheet"> <style id="jtd-nav-activation"> .site-nav ul li a { background-image: none; } </style> <script src="/muxi/assets/js/vendor/lunr.min.js"></script> <script src="/muxi/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Automatic User Information Extraction | MUXI Framework</title> <meta name="generator" content="Jekyll v4.2.2" /> <meta property="og:title" content="Automatic User Information Extraction" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="An extensible framework for building AI agents with real-time communication capabilities, memory persistence, and tool integration" /> <meta property="og:description" content="An extensible framework for building AI agents with real-time communication capabilities, memory persistence, and tool integration" /> <link rel="canonical" href="https://ranaroussi.github.io/muxi/muxi/technical/memory/user-extraction" /> <meta property="og:url" content="https://ranaroussi.github.io/muxi/muxi/technical/memory/user-extraction" /> <meta property="og:site_name" content="MUXI Framework" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Automatic User Information Extraction" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"An extensible framework for building AI agents with real-time communication capabilities, memory persistence, and tool integration","headline":"Automatic User Information Extraction","url":"https://ranaroussi.github.io/muxi/muxi/technical/memory/user-extraction"}</script> <!-- End Jekyll SEO tag --> <script src="https://cdn.jsdelivr.net/npm/mermaid@9.3.0/dist/mermaid.min.js"></script> <script>window.addEventListener("load", function() { mermaid.initialize({ startOnLoad: true }); });</script> <style> .mermaid { text-align: center; margin: 2rem auto; max-width: 100%; padding: 1rem; } body { -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; } .site-logo { width: 40px; height: 40px; padding-right: 10px; } .site-header { display: flex; align-items: center; height: 60px; } .site-header .site-title { display: flex; align-items: center; font-weight: 700; } .site-header .site-title:hover { background-image: none; } </style> <!-- Favicon links --> <link rel="apple-touch-icon" sizes="180x180" href="/muxi/assets/images/apple-touch-icon.png"> <link rel="icon" type="image/png" sizes="32x32" href="/muxi/assets/images/favicon-32x32.png"> <link rel="icon" type="image/png" sizes="16x16" href="/muxi/assets/images/favicon-16x16.png"> <link rel="manifest" href="/muxi/assets/images/site.webmanifest"> <link rel="shortcut icon" href="/muxi/assets/images/favicon.ico"> <title>Automatic User Information Extraction | MUXI AI Agent Framework</title> <meta name="description" content="An extensible framework for building AI agents with real-time communication capabilities, memory persistence, and tool integration"/> <meta property="og:title" content="Automatic User Information Extraction | MUXI AI Agent Framework"/> <meta property="og:locale" content="en_US"/> <meta property="og:description" content="An extensible framework for building AI agents with real-time communication capabilities, memory persistence, and tool integration"/> <meta property="og:url" content="https://ranaroussi.github.io/muxi/muxi/technical/memory/user-extraction"/> <meta property="og:site_name" content="MUXI AI Agent Framework"/> <meta property="og:type" content="website"/> <meta property="og:image" content="https://opengraph.githubassets.com/1/ranaroussi/muxi" /> <meta name="twitter:card" content="summary"/> <meta name="twitter:creator" content="@aroussi"/> <meta name="twitter:title" content="Automatic User Information Extraction | MUXI AI Agent Framework"/> <meta name="twitter:description" content="An extensible framework for building AI agents with real-time communication capabilities, memory persistence, and tool integration"/> <meta name="twitter:image" content="https://opengraph.githubassets.com/1/ranaroussi/muxi" /> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header" role="banner"> <a href="/muxi/" class="site-title lh-tight"> MUXI Framework </a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </button> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/muxi/" class="nav-list-link">Home</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Introduction category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/muxi/intro" class="nav-list-link">Introduction</a><ul class="nav-list"><li class="nav-list-item"><a href="/muxi/intro/overview" class="nav-list-link">Overview & Key Concepts</a></li><li class="nav-list-item"><a href="/muxi/intro/why-muxi" class="nav-list-link">Why MUXI?</a></li><li class="nav-list-item"><a href="/muxi/intro/quick-start" class="nav-list-link">Quick Start Guide</a></li><li class="nav-list-item"><a href="/muxi/intro/architecture" class="nav-list-link">Architecture</a></li><li class="nav-list-item"><a href="/muxi/intro/installation" class="nav-list-link">Installation</a></li><li class="nav-list-item"><a href="/muxi/intro/roadmap.html" class="nav-list-link">Roadmap</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Building Agents category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/muxi/agents" class="nav-list-link">Building Agents</a><ul class="nav-list"><li class="nav-list-item"><a href="/muxi/agents/simple" class="nav-list-link">Simple Agent</a></li><li class="nav-list-item"><a href="/muxi/agents/memory" class="nav-list-link">Context Memory</a></li><li class="nav-list-item"><a href="/muxi/agents/configuration" class="nav-list-link">Agent Configuration</a></li><li class="nav-list-item"><a href="/muxi/agents/multi-agent" class="nav-list-link">Multi-Agent Systems</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Extending Capabilities category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/muxi/extend" class="nav-list-link">Extending Capabilities</a><ul class="nav-list"><li class="nav-list-item"><a href="/muxi/extend/mcp" class="nav-list-link">MCP Server Integration</a></li><li class="nav-list-item"><a href="/muxi/extend/knowledge" class="nav-list-link">Context Knowledge</a></li></ul></li><li class="nav-list-item"><a href="/muxi/clients" class="nav-list-link">Interfaces & Clients</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Technical Deep Dives category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/muxi/technical" class="nav-list-link">Technical Deep Dives</a><ul class="nav-list"><li class="nav-list-item"><a href="/muxi/technical/agents" class="nav-list-link">Agents & Models</a></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Memory System category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/muxi/technical/memory" class="nav-list-link">Memory System</a><ul class="nav-list"><li class="nav-list-item"><a href="/muxi/technical/memory/buffer" class="nav-list-link">Buffer Memory</a></li></ul></li><li class="nav-list-item"><a href="/muxi/technical/mcp" class="nav-list-link">MCP System</a></li><li class="nav-list-item"><a href="/muxi/technical/communication" class="nav-list-link">Communication</a></li></ul></li><li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="toggle items in Reference category" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><a href="/muxi/reference" class="nav-list-link">Reference</a><ul class="nav-list"><li class="nav-list-item"><a href="/muxi/reference/api" class="nav-list-link">API Documentation</a></li><li class="nav-list-item"><a href="/muxi/reference/configuration" class="nav-list-link">Configuration Options</a></li><li class="nav-list-item"><a href="/muxi/reference/package" class="nav-list-link">Package Structure</a></li><li class="nav-list-item"><a href="/muxi/reference/examples" class="nav-list-link">Examples Library</a></li><li class="nav-list-item"><a href="/muxi/reference/comparisons" class="nav-list-link">Framework Comparisons</a></li></ul></li><li class="nav-list-item"><a href="/muxi/development" class="nav-list-link">Development</a></li><li class="nav-list-item"><a href="/muxi/roadmap" class="nav-list-link">Project Roadmap</a></li><li class="nav-list-item"><a href="/muxi/release-notes" class="nav-list-link">Release Notes</a></li></ul> <ul class="nav-list"><li class="nav-list-item external"> <a href="https://github.com/ranaroussi/muxi" class="nav-list-link external" target="_blank" rel="noopener noreferrer" > MUXI on GitHub <svg viewBox="0 0 24 24" aria-labelledby="svg-external-link-title"><use xlink:href="#svg-external-link"></use></svg> </a> </li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search" role="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search MUXI Framework" aria-label="Search MUXI Framework" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="https://github.com/ranaroussi/muxi" class="site-button" target="_blank" rel="noopener noreferrer" > MUXI on GitHub </a> </li> </ul> </nav> </div> <div class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><span>Automatic User Information Extraction</span></li> </ol> </nav> <div id="main-content" class="main-content"> <main> <h1 id="automatic-user-information-extraction"> <a href="#automatic-user-information-extraction" class="anchor-heading" aria-labelledby="automatic-user-information-extraction"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Automatic User Information Extraction </h1> <p>MUXI includes a powerful automatic user information extraction system that can identify and store important information about users from conversations. This guide explains how the extraction system works and how to configure it in your MUXI applications.</p> <blockquote class="note"> <p>User information extraction is designed with privacy in mind. All extraction is opt-in, anonymous users are excluded by default, and safeguards are in place to protect sensitive information.</p> </blockquote> <h2 id="overview"> <a href="#overview" class="anchor-heading" aria-labelledby="overview"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Overview </h2> <p>The automatic user information extraction system analyzes conversations between users and agents to identify key facts, preferences, and characteristics. It then stores this information in the user’s context memory, making it available for future interactions.</p> <h3 id="key-features"> <a href="#key-features" class="anchor-heading" aria-labelledby="key-features"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Key Features </h3> <ul> <li><strong>Zero-effort personalization</strong>: Remembers important user information without explicit programming</li> <li><strong>Importance scoring</strong>: Prioritizes information based on relevance and significance</li> <li><strong>Confidence assessment</strong>: Evaluates certainty before storing information</li> <li><strong>Conflict resolution</strong>: Handles updates when new information contradicts existing data</li> <li><strong>Privacy controls</strong>: Protects user privacy with opt-out mechanisms and anonymous user exclusion</li> </ul> <h2 id="architecture"> <a href="#architecture" class="anchor-heading" aria-labelledby="architecture"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Architecture </h2> <p>The extraction system follows a centralized architecture:</p> <ol> <li><strong>MemoryExtractor</strong>: Core class that analyzes conversations and extracts information</li> <li><strong>Orchestrator</strong>: Manages the extraction process and coordinates with agents</li> <li><strong>Agent</strong>: Delegates extraction to its parent Orchestrator</li> </ol> <p>When a user interacts with an agent, the conversation is processed asynchronously to extract important information without impacting response times.</p> <h3 id="implementation-details"> <a href="#implementation-details" class="anchor-heading" aria-labelledby="implementation-details"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Implementation Details </h3> <p>The extraction process works as follows:</p> <ol> <li>User sends a message to an agent</li> <li>Agent processes and responds to the message</li> <li>Agent delegates extraction to the Orchestrator</li> <li>Orchestrator processes the conversation asynchronously</li> <li>MemoryExtractor analyzes the content to identify key information</li> <li>Extracted information is scored for importance and confidence</li> <li>Valid information is stored in the user’s context memory</li> <li>Future conversations include this information in the agent’s context</li> </ol> <h2 id="configuration"> <a href="#configuration" class="anchor-heading" aria-labelledby="configuration"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Configuration </h2> <h3 id="basic-setup"> <a href="#basic-setup" class="anchor-heading" aria-labelledby="basic-setup"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Basic Setup </h3> <p>Automatic user information extraction is enabled by default in the Orchestrator. You can explicitly configure it as follows:</p> <h4> <a href="#basic-setup" class="anchor-heading" aria-labelledby="basic-setup"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Declarative way </h4> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># app.py
</span><span class="kn">from</span> <span class="nn">muxi</span> <span class="kn">import</span> <span class="n">muxi</span>
<span class="kn">from</span> <span class="nn">dotenv</span> <span class="kn">import</span> <span class="n">load_dotenv</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="c1"># Load environment variables
</span><span class="n">load_dotenv</span><span class="p">()</span>

<span class="c1"># Initialize MUXI with extraction enabled
</span><span class="n">app</span> <span class="o">=</span> <span class="n">muxi</span><span class="p">(</span>
    <span class="n">buffer_memory</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span>
    <span class="n">long_term_memory</span><span class="o">=</span><span class="s">"postgresql://user:pass@localhost/db"</span><span class="p">,</span>
    <span class="n">auto_extract_user_info</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>  <span class="c1"># Enable automatic extraction
</span>    <span class="n">config_file</span><span class="o">=</span><span class="s">"configs/muxi_config.yaml"</span>
<span class="p">)</span>
</code></pre></div></div> <h4> <a href="#basic-setup" class="anchor-heading" aria-labelledby="basic-setup"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Programmatic way </h4> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">from</span> <span class="nn">muxi.core.orchestrator</span> <span class="kn">import</span> <span class="n">Orchestrator</span>
<span class="kn">from</span> <span class="nn">muxi.models.providers.openai</span> <span class="kn">import</span> <span class="n">OpenAIModel</span>
<span class="kn">from</span> <span class="nn">muxi.server.memory.buffer</span> <span class="kn">import</span> <span class="n">BufferMemory</span>
<span class="kn">from</span> <span class="nn">muxi.server.memory.long_term</span> <span class="kn">import</span> <span class="n">LongTermMemory</span>

<span class="c1"># Initialize components
</span><span class="n">model</span> <span class="o">=</span> <span class="n">OpenAIModel</span><span class="p">(</span>
    <span class="n">api_key</span><span class="o">=</span><span class="n">os</span><span class="p">.</span><span class="n">getenv</span><span class="p">(</span><span class="s">"OPENAI_API_KEY"</span><span class="p">),</span>
    <span class="n">model</span><span class="o">=</span><span class="s">"gpt-4o"</span>
<span class="p">)</span>
<span class="nb">buffer</span> <span class="o">=</span> <span class="n">BufferMemory</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span>
<span class="n">long_term_memory</span> <span class="o">=</span> <span class="n">LongTermMemory</span><span class="p">(</span><span class="n">connection_string</span><span class="o">=</span><span class="s">"postgresql://user:pass@localhost/db"</span><span class="p">)</span>

<span class="c1"># Initialize orchestrator with extraction enabled
</span><span class="n">orchestrator</span> <span class="o">=</span> <span class="n">Orchestrator</span><span class="p">(</span>
    <span class="n">buffer_memory</span><span class="o">=</span><span class="nb">buffer</span><span class="p">,</span>
    <span class="n">long_term_memory</span><span class="o">=</span><span class="n">long_term_memory</span><span class="p">,</span>
    <span class="n">auto_extract_user_info</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>  <span class="c1"># Enable automatic extraction
</span><span class="p">)</span>

<span class="c1"># Create an agent that will use the orchestrator's extraction
</span><span class="n">orchestrator</span><span class="p">.</span><span class="n">create_agent</span><span class="p">(</span>
    <span class="n">agent_id</span><span class="o">=</span><span class="s">"assistant"</span><span class="p">,</span>
    <span class="n">description</span><span class="o">=</span><span class="s">"A helpful assistant that remembers important user information."</span><span class="p">,</span>
    <span class="n">model</span><span class="o">=</span><span class="n">model</span>
<span class="p">)</span>
</code></pre></div></div> <h3 id="advanced-configuration"> <a href="#advanced-configuration" class="anchor-heading" aria-labelledby="advanced-configuration"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Advanced Configuration </h3> <p>For more control over the extraction process, you can configure additional parameters:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">muxi.models.providers.openai</span> <span class="kn">import</span> <span class="n">OpenAIModel</span>

<span class="c1"># Create a specialized model for extraction
</span><span class="n">extraction_model</span> <span class="o">=</span> <span class="n">OpenAIModel</span><span class="p">(</span>
    <span class="n">api_key</span><span class="o">=</span><span class="n">os</span><span class="p">.</span><span class="n">getenv</span><span class="p">(</span><span class="s">"OPENAI_API_KEY"</span><span class="p">),</span>
    <span class="n">model</span><span class="o">=</span><span class="s">"gpt-4o"</span><span class="p">,</span>  <span class="c1"># Using a capable model for extraction
</span>    <span class="n">temperature</span><span class="o">=</span><span class="mf">0.0</span>  <span class="c1"># Lower temperature for more deterministic extraction
</span><span class="p">)</span>

<span class="c1"># Initialize orchestrator with advanced extraction options
</span><span class="n">orchestrator</span> <span class="o">=</span> <span class="n">Orchestrator</span><span class="p">(</span>
    <span class="n">buffer_memory</span><span class="o">=</span><span class="nb">buffer</span><span class="p">,</span>
    <span class="n">long_term_memory</span><span class="o">=</span><span class="n">long_term_memory</span><span class="p">,</span>
    <span class="n">auto_extract_user_info</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
    <span class="n">extraction_model</span><span class="o">=</span><span class="n">extraction_model</span><span class="p">,</span>  <span class="c1"># Specify a dedicated model for extraction
</span>    <span class="n">extraction_interval</span><span class="o">=</span><span class="mi">3</span>  <span class="c1"># Process extraction every 3 messages (default is 1)
</span><span class="p">)</span>
</code></pre></div></div> <h3 id="extraction-parameters"> <a href="#extraction-parameters" class="anchor-heading" aria-labelledby="extraction-parameters"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Extraction Parameters </h3> <p>The following parameters can be configured:</p> <div class="table-wrapper"><table> <thead> <tr> <th>Parameter</th> <th>Description</th> <th>Default</th> </tr> </thead> <tbody> <tr> <td><code class="language-plaintext highlighter-rouge">auto_extract_user_info</code></td> <td>Enable/disable automatic extraction</td> <td><code class="language-plaintext highlighter-rouge">True</code></td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">extraction_model</code></td> <td>Model used for extraction</td> <td>Same as agent model</td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">extraction_interval</code></td> <td>Process extraction every N messages</td> <td><code class="language-plaintext highlighter-rouge">1</code></td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">confidence_threshold</code></td> <td>Minimum confidence score (0.0-1.0)</td> <td><code class="language-plaintext highlighter-rouge">0.7</code></td> </tr> <tr> <td><code class="language-plaintext highlighter-rouge">importance_threshold</code></td> <td>Minimum importance score (0.0-1.0)</td> <td><code class="language-plaintext highlighter-rouge">0.5</code></td> </tr> </tbody> </table></div> <h2 id="privacy-controls"> <a href="#privacy-controls" class="anchor-heading" aria-labelledby="privacy-controls"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Privacy Controls </h2> <h3 id="automatic-privacy-features"> <a href="#automatic-privacy-features" class="anchor-heading" aria-labelledby="automatic-privacy-features"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Automatic Privacy Features </h3> <p>The extraction system includes several built-in privacy features:</p> <ol> <li><strong>Anonymous User Exclusion</strong>: Users with <code class="language-plaintext highlighter-rouge">user_id=0</code> are automatically excluded from extraction</li> <li><strong>Configurable Thresholds</strong>: Only information with sufficient confidence is stored</li> <li><strong>PII Detection</strong>: Basic detection of sensitive personal information</li> <li><strong>Asynchronous Processing</strong>: Extraction runs separately from conversation flow</li> </ol> <h3 id="user-opt-out"> <a href="#user-opt-out" class="anchor-heading" aria-labelledby="user-opt-out"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> User Opt-Out </h3> <p>You can explicitly exclude users from extraction:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Exclude a user from extraction
</span><span class="k">await</span> <span class="n">orchestrator</span><span class="p">.</span><span class="n">opt_out_user</span><span class="p">(</span><span class="n">user_id</span><span class="o">=</span><span class="s">"user_123"</span><span class="p">,</span> <span class="n">opt_out</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="c1"># Re-enable extraction for a user
</span><span class="k">await</span> <span class="n">orchestrator</span><span class="p">.</span><span class="n">opt_out_user</span><span class="p">(</span><span class="n">user_id</span><span class="o">=</span><span class="s">"user_123"</span><span class="p">,</span> <span class="n">opt_out</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</code></pre></div></div> <h3 id="data-purging"> <a href="#data-purging" class="anchor-heading" aria-labelledby="data-purging"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Data Purging </h3> <p>You can purge all extracted information for a user:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Remove all extracted information for a user
</span><span class="k">await</span> <span class="n">orchestrator</span><span class="p">.</span><span class="n">purge_user_data</span><span class="p">(</span><span class="n">user_id</span><span class="o">=</span><span class="s">"user_123"</span><span class="p">)</span>
</code></pre></div></div> <h2 id="accessing-extracted-information"> <a href="#accessing-extracted-information" class="anchor-heading" aria-labelledby="accessing-extracted-information"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Accessing Extracted Information </h2> <p>Information extracted by the system is automatically included in the agent’s context for future conversations. You can also access it directly:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Get all context memory for a user
</span><span class="n">user_context</span> <span class="o">=</span> <span class="k">await</span> <span class="n">orchestrator</span><span class="p">.</span><span class="n">get_user_context_memory</span><span class="p">(</span><span class="n">user_id</span><span class="o">=</span><span class="s">"user_123"</span><span class="p">)</span>

<span class="c1"># Check specific extracted information
</span><span class="k">if</span> <span class="s">"preferred_language"</span> <span class="ow">in</span> <span class="n">user_context</span><span class="p">:</span>
    <span class="n">preferred_language</span> <span class="o">=</span> <span class="n">user_context</span><span class="p">[</span><span class="s">"preferred_language"</span><span class="p">][</span><span class="s">"value"</span><span class="p">]</span>
    <span class="k">print</span><span class="p">(</span><span class="sa">f</span><span class="s">"User prefers programming in </span><span class="si">{</span><span class="n">preferred_language</span><span class="si">}</span><span class="s">"</span><span class="p">)</span>
</code></pre></div></div> <h2 id="example-extraction-in-action"> <a href="#example-extraction-in-action" class="anchor-heading" aria-labelledby="example-extraction-in-action"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Example: Extraction in Action </h2> <p>Here’s an example of automatic extraction in a conversation:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># User interacts with the agent
</span><span class="n">user_message</span> <span class="o">=</span> <span class="s">"I live in Berlin and I'm learning Python. I prefer visual explanations over text."</span>
<span class="n">agent_response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">app</span><span class="p">.</span><span class="n">chat</span><span class="p">(</span>
    <span class="n">message</span><span class="o">=</span><span class="n">user_message</span><span class="p">,</span>
    <span class="n">agent_name</span><span class="o">=</span><span class="s">"assistant"</span><span class="p">,</span>
    <span class="n">user_id</span><span class="o">=</span><span class="s">"user_123"</span>
<span class="p">)</span>

<span class="c1"># Behind the scenes, the system extracts:
# - Location: Berlin
# - Learning: Python
# - Preference: Visual explanations
</span>
<span class="c1"># In a future conversation, the agent can use this information
</span><span class="n">later_response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">app</span><span class="p">.</span><span class="n">chat</span><span class="p">(</span>
    <span class="n">message</span><span class="o">=</span><span class="s">"Can you help me understand dictionaries?"</span><span class="p">,</span>
    <span class="n">agent_name</span><span class="o">=</span><span class="s">"assistant"</span><span class="p">,</span>
    <span class="n">user_id</span><span class="o">=</span><span class="s">"user_123"</span>
<span class="p">)</span>
<span class="c1"># The agent might respond with a visual explanation of Python dictionaries,
# since it remembers the user's location, learning interests, and preferences
</span></code></pre></div></div> <h2 id="best-practices"> <a href="#best-practices" class="anchor-heading" aria-labelledby="best-practices"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Best Practices </h2> <ol> <li> <p><strong>Set an appropriate extraction interval</strong> - Balance between comprehensive extraction and performance. For chatbots, every message (interval=1) works well; for applications with frequent messages, consider a higher interval.</p> </li> <li> <p><strong>Consider using a specialized extraction model</strong> - For high-accuracy extraction, consider using a more capable model for extraction than your main conversation model.</p> </li> <li> <p><strong>Adjust confidence thresholds</strong> - Tune the confidence threshold based on your needs. Higher thresholds (e.g., 0.8) will reduce false positives but might miss some information.</p> </li> <li> <p><strong>Respect privacy preferences</strong> - Always provide clear opt-out mechanisms and process opt-out requests promptly.</p> </li> <li> <p><strong>Review extracted information periodically</strong> - Audit the quality and accuracy of extracted information to fine-tune your system.</p> </li> <li> <p><strong>Implement retention policies</strong> - Define how long extracted information should be stored and implement automatic aging or purging.</p> </li> </ol> <h2 id="limitations-and-considerations"> <a href="#limitations-and-considerations" class="anchor-heading" aria-labelledby="limitations-and-considerations"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Limitations and Considerations </h2> <ul> <li>Extraction is only as good as the underlying model. More capable models generally provide better extraction results.</li> <li>Complex or nuanced information may not be extracted correctly. Consider supplementing with explicit storage where needed.</li> <li>Extraction runs asynchronously and may not be immediate. Don’t rely on instant availability of newly extracted information.</li> <li>Balance between extraction frequency and API costs, especially with third-party models that charge per token.</li> </ul> <h2 id="whats-next"> <a href="#whats-next" class="anchor-heading" aria-labelledby="whats-next"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> What’s Next </h2> <p>Now that you understand automatic user information extraction, you might want to:</p> <ul> <li>Learn about <a href="../namespaces/">Context Memory Namespaces</a> for organizing extracted information</li> <li>Explore <a href="../optimization/">Memory Optimization</a> for improving performance</li> <li>Consider implementing <a href="../user-id/">Interface-Level User ID Generation</a> for consistent user identification</li> </ul> </main> <hr> <footer> <p><a href="#top" id="back-to-top">Back to top</a></p> <p class="text-small text-grey-dk-100 mb-0">Copyright &copy; 2025 Ran Aroussi.<br>Licensed under Creative's Commons Attribution-NonCommercial-NoDerivatives 4.0 (CC BY-NC-ND 4.0) license.</p> </footer> </div> </div> <div class="search-overlay"></div> </div> <script src="https://cdn.jsdelivr.net/npm/mermaid@9.1.6/dist/mermaid.min.js"></script> <script> var config = {} ; mermaid.initialize(config); window.mermaid.init(undefined, document.querySelectorAll('.language-mermaid')); </script> </body> </html>
